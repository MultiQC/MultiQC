{# #######################
  header.html
##########################

This block gives the introduction content at the top of each report.
That is, the page title, welcome message, details of where the report
was generated and the button that launches the welcome tour.

#}

<h1 id="page_title">
    {% if config.custom_logo is not none %}
      <div class="pull-right">
      {{ '<a href="'+config.custom_logo_url+'" target="_blank">' if config.custom_logo_url is not none }}
        <img src="data:image/png;base64,{{ include_file(config.custom_logo, b64=True) }}" title="{{ config.custom_logo_title if config.custom_logo_title is not none }}" class="custom_logo">
      {{ '</a>' if config.custom_logo_url is not none }}
      </div>
    {% endif %}
    <a href="http://multiqc.info" target="_blank">
        <img src="data:image/png;base64,{{ include_file('assets/img/MultiQC_logo.png', b64=True) }}" title="MultiQC" class="multiqc_logo">
    </a>
</h1>
{% if config.title is not none or config.subtitle is not none %}
<h1>
  {{ config.title if config.title is not none }}
  {{ '<br>' if config.title is not none and config.subtitle is not none }}
  {{ '<small>'+config.subtitle+'</small>' if config.subtitle is not none }}
</h1>
{% endif %}

{% if config.intro_text != False %}
<p class="lead">
  {{ config.intro_text if config.intro_text is not none else 'A modular tool to aggregate results from bioinformatics analyses across many samples into a single report.' }}
</p>
{% endif %}

{% if config.report_comment and config.report_comment | length > 0 %}
<blockquote class="report_comment">{{ config.report_comment }}</blockquote>
{% endif %}

{% if config.report_header_info and config.report_header_info | length > 0 %}
<div class="well">
  <dl class="dl-horizontal" style="margin-bottom:0;">
    {% for d in config.report_header_info %}{% for k, v in d.items() %}
      <dt>{{ k }}</dt><dd>{{ v }}</dd>
    {% endfor %}{% endfor %}
  </dl>
</div>
{% endif %}

<noscript>
  <div class="alert alert-danger">
    <h4>JavaScript Disabled</h4>
    <p>MultiQC reports use JavaScript for plots and toolbox functions. It looks like
    you have JavaScript disabled in your web browser. Please note that many of the report
    functions will not work as intended.</p>
  </div>
</noscript>

<div class="alert alert-warning mqc_loading_warning" style="display:none;"><span class="glyphicon glyphicon-time"></span> &nbsp;Loading report..</div>

{% if config.show_analysis_time or config.show_analysis_paths %}
<div id="analysis_dirs_wrapper" style="display: flex; justify-content: space-between; align-items: center;">
  <span style="flex: 1;">Report 
    {% if config.show_analysis_time %}
      generated on {{ config.creation_date }}
    {% endif %}
    {% if config.show_analysis_paths %}
      based on data in:
      {% if report.analysis_files | length == 1 %}
        <code class="mqc_analysis_path">{{ report.analysis_files[0] }}</code>
      {% else %}
        <ul>
          {% for d in report.analysis_files %}
          <li><code class="mqc_analysis_path">{{ d }}</code></li>
          {%  endfor %}
        </ul>
      {% endif %}
    {% endif %}
  </span>
  {% if not config.no_ai and not report.ai_global_summary %}
  <div class="ai-generate-button-wrapper">
    <button
      class="btn btn-default btn-sm ai-generate-button ai-generate-button-global"
      data-response-div="global_ai_summary_response"
      data-error-div="global_ai_summary_error"
      data-disclaimer-div="global_ai_summary_disclaimer"
      data-wrapper-div="global_ai_summary_wrapper"
      data-section-anchor="global"
      data-action="{% if report.ai_global_summary %}clear{% else %}generate{% endif %}"
      data-clear-text="Clear summary"
      data-toggle="tooltip"
      type="button"
      title="Adds a block on top of the report with a concise summary and interpretation of the report."
    >
      <span style="vertical-align: baseline">
        <svg width="11" height="10" viewBox="0 0 17 15" fill="black" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.4375 7L7.9375 1.5L9.4375 7L14.9375 8.5L9.4375 10.5L7.9375 15.5L6.4375 10.5L0.9375 8.5L6.4375 7Z" stroke="black" stroke-width="0.75" stroke-linejoin="round"></path>
          <path d="M13.1786 2.82143L13.5 4L13.8214 2.82143L15 2.5L13.8214 2.07143L13.5 1L13.1786 2.07143L12 2.5L13.1786 2.82143Z" stroke="#160F26" stroke-width="0.5" stroke-linejoin="round"></path>
        </svg>
      </span>
      <span class="button-text">Summarize Report</span>
    </button>
  </div>
  {% endif %}
  {% if not config.no_ai %}
  <div class="ai-copy-button-wrapper">
    <button 
      type="button"
      class="btn btn-default btn-sm ai-copy-content ai-copy-content-report"
      data-toggle="tooltip" 
      data-section-anchor="global"
      title="Copies the report data to the clipboard formatted to discuss with AI chats like ChatGPT or Claude"
    >
      <span style="vertical-align: baseline">
        <svg width="11" height="10" viewBox="0 0 17 15" fill="black" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.4375 7L7.9375 1.5L9.4375 7L14.9375 8.5L9.4375 10.5L7.9375 15.5L6.4375 10.5L0.9375 8.5L6.4375 7Z" stroke="black" stroke-width="0.75" stroke-linejoin="round"></path>
          <path d="M13.1786 2.82143L13.5 4L13.8214 2.82143L15 2.5L13.8214 2.07143L13.5 1L13.1786 2.07143L12 2.5L13.1786 2.82143Z" stroke="#160F26" stroke-width="0.5" stroke-linejoin="round"></path>
        </svg>
      </span>
      <span class="button-text">Copy Report Prompt</span>
    </button>
  </div>
  {% endif %}
</div>
{% endif %}

{% if config.sample_names_rename_buttons | length > 0 %}
<p id="mqc_sname_switches_txt">Change sample names:
  <span class="btn-group btn-group-sm" role="group" id="mqc_sname_switches">
    {% for sn_t in config.sample_names_rename_buttons %}
      <button type="button" class="btn btn-primary mqc_sname_switches {% if loop.index == 1 %}active{% endif %}" data-index="{{ loop.index - 1 }}">{{ sn_t }}</button>
    {%- endfor %}
  </span>
</p>
{% endif %}


{% if config.show_hide_buttons | length > 0 %}
<p id="mqc_hide_switches_txt">Show/Hide samples:
  <span class="btn-group btn-group-sm" role="group" id="mqc_hide_switches">
    {% for sn_t in config.show_hide_buttons %}
      <button type="button" class="btn btn-primary mqc_hide_switches {% if loop.index == 1 %}active{% endif %}" data-index="{{ loop.index - 1 }}">{{ sn_t }}</button>
    {%- endfor %}
  </span>
</p>
{% endif %}

<hr id="mqc_header_hr">

<div class="alert alert-info alert-dismissible hidden-print" id="mqc_welcome" style="display: none;">
  <button type="button" data-dismiss="alert" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <button type="button" data-dismiss="alert" class="btn-link btn-sm" id="mqc_hide_welcome_btn">don't show again</button>
  <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
  <strong>Welcome!</strong> Not sure where to start? &nbsp;
  <a href="https://www.youtube.com/watch?v=qPbIlO_KWN0" target="_blank" class="btn btn-info btn-sm">Watch a tutorial video</a>
  &nbsp; <small><em>(6:06)</em></small>
</div>

{% if report.plot_data | length > 0 and report.some_plots_are_deferred %}
<div id="mqc-warning-many-samples" class="alert alert-warning alert-dismissible hidden-print">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
  Because this report contains a lot of samples, you may need to click 'Show plot' to see some graphs.
  <button id="mqc-render-all-plots" class="btn btn-default btn-sm">Render all plots</button>
</div>
{% endif %}

<div 
  id="global_ai_summary_wrapper" 
  class="ai-summary"
  style="display: {% if report.ai_global_summary | length > 0 %}block{% else %}none{% endif %};"
>
  <div class="ai-summary-header">
    <b>Report AI Summary </b>
    <span style="vertical-align: middle">
      <svg width="30" height="12" viewBox="0 0 49 19" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="1.4375" y="0.5" width="47" height="18" rx="9" fill="#160F26" fill-opacity="0.1"/>
        <rect x="1.4375" y="0.5" width="47" height="18" rx="9" stroke="#160F26"/>
        <path d="M13.0392 14V5.27273H16.0904C16.6983 5.27273 17.1998 5.37784 17.5946 5.58807C17.9895 5.79545 18.2836 6.07528 18.4767 6.42756C18.6699 6.77699 18.7665 7.16477 18.7665 7.59091C18.7665 7.96591 18.6998 8.27557 18.5662 8.51989C18.4355 8.7642 18.2623 8.95739 18.0463 9.09943C17.8333 9.24148 17.6017 9.34659 17.3517 9.41477V9.5C17.6188 9.51705 17.8873 9.6108 18.1571 9.78125C18.427 9.9517 18.6529 10.196 18.8347 10.5142C19.0165 10.8324 19.1074 11.2216 19.1074 11.6818C19.1074 12.1193 19.008 12.5128 18.8091 12.8622C18.6103 13.2116 18.2963 13.4886 17.8674 13.6932C17.4384 13.8977 16.8801 14 16.1926 14H13.0392ZM14.0961 13.0625H16.1926C16.883 13.0625 17.373 12.929 17.6628 12.6619C17.9554 12.392 18.1017 12.0653 18.1017 11.6818C18.1017 11.3864 18.0265 11.1136 17.8759 10.8636C17.7253 10.6108 17.5108 10.4091 17.2324 10.2585C16.954 10.1051 16.6245 10.0284 16.2438 10.0284H14.0961V13.0625ZM14.0961 9.10795H16.0563C16.3745 9.10795 16.6614 9.04545 16.9171 8.92045C17.1756 8.79545 17.3801 8.61932 17.5307 8.39205C17.6841 8.16477 17.7608 7.89773 17.7608 7.59091C17.7608 7.20739 17.6273 6.8821 17.3603 6.61506C17.0932 6.34517 16.6699 6.21023 16.0904 6.21023H14.0961V9.10795ZM23.4519 14.1364C22.8212 14.1364 22.2772 13.9972 21.8198 13.7188C21.3652 13.4375 21.0144 13.0455 20.7672 12.5426C20.5229 12.0369 20.4007 11.4489 20.4007 10.7784C20.4007 10.108 20.5229 9.51705 20.7672 9.00568C21.0144 8.49148 21.3581 8.09091 21.7985 7.80398C22.2417 7.5142 22.7587 7.36932 23.3496 7.36932C23.6905 7.36932 24.0272 7.42614 24.3596 7.53977C24.6919 7.65341 24.9945 7.83807 25.2672 8.09375C25.54 8.34659 25.7573 8.68182 25.9192 9.09943C26.0811 9.51705 26.1621 10.0312 26.1621 10.642V11.0682H21.1167V10.1989H25.1394C25.1394 9.82955 25.0655 9.5 24.9178 9.21023C24.7729 8.92045 24.5655 8.69176 24.2956 8.52415C24.0286 8.35653 23.7132 8.27273 23.3496 8.27273C22.949 8.27273 22.6025 8.37216 22.3098 8.57102C22.0201 8.76705 21.7971 9.02273 21.6408 9.33807C21.4846 9.65341 21.4064 9.99148 21.4064 10.3523V10.9318C21.4064 11.4261 21.4917 11.8452 21.6621 12.1889C21.8354 12.5298 22.0755 12.7898 22.3823 12.9688C22.6891 13.1449 23.0456 13.233 23.4519 13.233C23.7161 13.233 23.9547 13.196 24.1678 13.1222C24.3837 13.0455 24.5698 12.9318 24.726 12.7812C24.8823 12.6278 25.003 12.4375 25.0882 12.2102L26.0598 12.483C25.9576 12.8125 25.7857 13.1023 25.5442 13.3523C25.3027 13.5994 25.0044 13.7926 24.6493 13.9318C24.2942 14.0682 23.8951 14.1364 23.4519 14.1364ZM30.5385 7.45455V8.30682H27.1465V7.45455H30.5385ZM28.1351 5.88636H29.1408V12.125C29.1408 12.4091 29.182 12.6222 29.2644 12.7642C29.3496 12.9034 29.4576 12.9972 29.5882 13.0455C29.7218 13.0909 29.8624 13.1136 30.0101 13.1136C30.1209 13.1136 30.2118 13.108 30.2828 13.0966C30.3539 13.0824 30.4107 13.071 30.4533 13.0625L30.6578 13.9659C30.5897 13.9915 30.4945 14.017 30.3723 14.0426C30.2502 14.071 30.0953 14.0852 29.9078 14.0852C29.6238 14.0852 29.3453 14.0241 29.0726 13.902C28.8027 13.7798 28.5783 13.5938 28.3993 13.3438C28.2232 13.0938 28.1351 12.7784 28.1351 12.3977V5.88636ZM33.9775 14.1534C33.5627 14.1534 33.1863 14.0753 32.8482 13.919C32.5101 13.7599 32.2417 13.5312 32.0428 13.233C31.8439 12.9318 31.7445 12.5682 31.7445 12.142C31.7445 11.767 31.8184 11.4631 31.9661 11.2301C32.1138 10.9943 32.3113 10.8097 32.5584 10.6761C32.8056 10.5426 33.0783 10.4432 33.3766 10.3778C33.6777 10.3097 33.9803 10.2557 34.2843 10.2159C34.682 10.1648 35.0044 10.1264 35.2516 10.1009C35.5016 10.0724 35.6834 10.0256 35.7971 9.96023C35.9135 9.89489 35.9718 9.78125 35.9718 9.61932V9.58523C35.9718 9.16477 35.8567 8.83807 35.6266 8.60511C35.3993 8.37216 35.0542 8.25568 34.5911 8.25568C34.111 8.25568 33.7346 8.3608 33.4618 8.57102C33.1891 8.78125 32.9973 9.00568 32.8865 9.24432L31.932 8.90341C32.1025 8.50568 32.3297 8.19602 32.6138 7.97443C32.9007 7.75 33.2132 7.59375 33.5513 7.50568C33.8922 7.41477 34.2275 7.36932 34.557 7.36932C34.7672 7.36932 35.0087 7.39489 35.2814 7.44602C35.557 7.49432 35.8226 7.59517 36.0783 7.74858C36.3368 7.90199 36.5513 8.13352 36.7218 8.44318C36.8922 8.75284 36.9775 9.16761 36.9775 9.6875V14H35.9718V13.1136H35.9206C35.8525 13.2557 35.7388 13.4077 35.5797 13.5696C35.4206 13.7315 35.209 13.8693 34.9448 13.983C34.6806 14.0966 34.3581 14.1534 33.9775 14.1534ZM34.1309 13.25C34.5286 13.25 34.8638 13.1719 35.1365 13.0156C35.4121 12.8594 35.6195 12.6577 35.7587 12.4105C35.9007 12.1634 35.9718 11.9034 35.9718 11.6307V10.7102C35.9292 10.7614 35.8354 10.8082 35.6905 10.8509C35.5485 10.8906 35.3837 10.9261 35.1962 10.9574C35.0115 10.9858 34.8311 11.0114 34.655 11.0341C34.4817 11.054 34.3411 11.071 34.2331 11.0852C33.9718 11.1193 33.7275 11.1747 33.5002 11.2514C33.2757 11.3253 33.0939 11.4375 32.9547 11.5881C32.8184 11.7358 32.7502 11.9375 32.7502 12.1932C32.7502 12.5426 32.8794 12.8068 33.138 12.9858C33.3993 13.1619 33.7303 13.25 34.1309 13.25Z" fill="#160F26"/>
      </svg>
    </span>
    <button class='btn btn-default btn-sm ai-continue-in-chat'
      style="display: {% if report.ai_generation_id %}flex{% else %}none{% endif %};"
      data-generation-id="{{ report.ai_generation_id }}"
      data-seqera-website="{{ config.seqera_website }}"
      onclick="continueInSeqeraChatHandler(event)"
    >
       Continue with <strong>Seqera AI</strong>
    </button>
  </div>
  <div id="global_ai_summary_response">
    {{ report.ai_global_summary }}
  </div>
  <div
    {% if report.ai_global_detailed_analysis %}{% else %}class="ai-local-content"{% endif %}
    id="global_ai_summary_detailed_analysis_response"
    style="display: {% if report.ai_global_detailed_analysis %}block{% else %}none{% endif %};"
  >
    {{ report.ai_global_detailed_analysis }}
    <!-- <p style="display: flex; justify-content: space-between; align-items: center;"><b>Analysis</b></p> -->
  </div>
  <div id="global_ai_summary_more_button_and_disclaimer" style="margin-top: 8px; margin-bottom: 8px; margin-left: -1px; display: flex; justify-content: space-between; align-items: center;">
    {% if not report.ai_global_detailed_analysis %}
    <button
      class="btn btn-sm btn-default ai-generate-button ai-generate-button-global ai-generate-button-more"
      data-response-div="global_ai_summary_detailed_analysis_response"
      data-error-div="global_ai_summary_error"
      data-disclaimer-div="global_ai_summary_disclaimer"
      data-wrapper-div="global_ai_summary_detailed_analysis"
      data-section-anchor="global"
      data-action="{% if report.ai_global_detailed_analysis %}clear{% else %}generate{% endif %}"
      data-clear-text="Clear response"
      type="button"
      style="padding: 2px 8px; margin-right: 10px"
    >
      Generate more...
    </button>
    {% endif %}
    <span 
      class="ai-summary-disclaimer" 
      id="global_ai_summary_disclaimer" 
      style="display: {% if report.ai_global_summary | length > 0 %}block{% else %}none{% endif %};"
    >
      This summary is AI-generated. Provider: {{ report.ai_provider_title }}, model: {{ report.ai_model_resolved or report.ai_model }}
    </span>
  </div>
  <div class="ai-summary-error" id="global_ai_summary_error" style="display: none;"></div>
  <div 
    id="global_ai_summary_expand" 
    class="mqc-table-expand ai-summary-expand"
    style="display: {% if report.ai_global_detailed_analysis %}block{% else %}none{% endif %};"
  >
    <span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
  </div>
</div>